var windyPlugin=function(e){"use strict";const t={name:"windy-plugin-heat-units",version:"1.0.13",icon:"üå°Ô∏è",title:"Agricultural Heat Units",description:"Calculate and visualize Growing Degree Days (GDD) for optimal crop management and agricultural planning",author:"crop-crusaders",repository:"https://github.com/crop-crusaders/windy-plugin-heat-units",repositoryOwner:"crop-crusaders",repositoryName:"windy-plugin-heat-units",desktopUI:"rhpane",mobileUI:"fullscreen",routerPath:"/heat-units",addToContextmenu:!0,listenToSingleclick:!0,built:Date.now(),builtReadable:(new Date).toISOString(),commitSha:"development"},n=async e=>{if("undefined"==typeof document)return console.warn("[windy-plugin-heat-units] Document is not available; skipping UI bootstrap."),()=>{};const{el:t}=e,n=function(e,t){if(t instanceof HTMLElement)return t;const n=document.createElement("section");n.className="windy-plugin-heat-units-root",n.style.minHeight="220px",n.style.padding="16px",n.style.background="rgba(255, 255, 255, 0.95)",n.style.color="#2c3e50";const a=function(e){const t="node"in e&&e.node instanceof HTMLElement?e.node:"root"in e&&e.root instanceof HTMLElement?e.root:null;return t??document.body}(e);return a.appendChild(n),n}(e,t);n.innerHTML="",n.dataset.pluginReady="true";const a=(await Promise.resolve().then(function(){return ye})).default;let o=null;try{o=new a({target:n,props:{}})}catch(e){return console.error("Failed to mount Windy heat units plugin UI:",e),function(e){const t=document.createElement("div");t.className="windy-plugin-heat-units-error",t.style.padding="16px",t.style.background="rgba(231, 76, 60, 0.12)",t.style.border="1px solid rgba(231, 76, 60, 0.35)",t.style.borderRadius="8px",t.style.color="#c0392b",t.innerHTML='\n    <h3 style="margin: 0 0 8px 0; font-size: 1rem;">Plugin failed to load</h3>\n    <p style="margin: 0; font-size: 0.85rem; line-height: 1.4;">\n      The Agricultural Heat Units interface could not be initialised. Please reload the plugin or check the browser console for details.\n    </p>\n  ',e.appendChild(t)}(n),()=>{n.removeAttribute("data-plugin-ready")}}return()=>{o&&(o.$destroy(),o=null),n.removeAttribute("data-plugin-ready"),!t&&n.parentElement&&n.parentElement.removeChild(n)}};const a={config:t,default:n};function o(){}function s(e){return e()}function r(){return Object.create(null)}function l(e){e.forEach(s)}function i(e){return"function"==typeof e}function d(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function c(e,t){e.appendChild(t)}function p(e,t,n){const a=function(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;if(t&&t.host)return t;return e.ownerDocument}(e);if(!a.getElementById(t)){const e=h("style");e.id=t,e.textContent=n,function(e,t){c(e.head||e,t),t.sheet}(a,e)}}function u(e,t,n){e.insertBefore(t,n||null)}function m(e){e.parentNode&&e.parentNode.removeChild(e)}function y(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function h(e){return document.createElement(e)}function v(e){return document.createTextNode(e)}function g(){return v(" ")}function f(e,t,n,a){return e.addEventListener(t,n,a),()=>e.removeEventListener(t,n,a)}function x(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function b(e){return""===e?null:+e}function k(e,t){t=""+t,e.data!==t&&(e.data=t)}function M(e,t){e.value=null==t?"":t}function w(e,t,n,a){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,"")}function _(e,t,n){for(let n=0;n<e.options.length;n+=1){const a=e.options[n];if(a.__value===t)return void(a.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}function T(e){const t=e.querySelector(":checked");return t&&t.__value}function $(e,t,n){e.classList.toggle(t,!!n)}let D;function C(e){D=e}function R(){if(!D)throw new Error("Function called outside component initialization");return D}"undefined"!=typeof globalThis&&(globalThis.windyPlugin=a);const I=[],P=[];let G=[];const F=[],S=Promise.resolve();let L=!1;function H(e){G.push(e)}const z=new Set;let E=0;function O(){if(0!==E)return;const e=D;do{try{for(;E<I.length;){const e=I[E];E++,C(e),A(e.$$)}}catch(e){throw I.length=0,E=0,e}for(C(null),I.length=0,E=0;P.length;)P.pop()();for(let e=0;e<G.length;e+=1){const t=G[e];z.has(t)||(z.add(t),t())}G.length=0}while(I.length);for(;F.length;)F.pop()();L=!1,z.clear(),C(e)}function A(e){if(null!==e.fragment){e.update(),l(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(H)}}const N=new Set;function q(e){return void 0!==e?.length?e:Array.from(e)}function U(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];G.forEach(a=>-1===e.indexOf(a)?t.push(a):n.push(a)),n.forEach(e=>e()),G=t}(n.after_update),l(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function W(e,t){-1===e.$$.dirty[0]&&(I.push(e),L||(L=!0,S.then(O)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function j(e,t,n,a,d,c,p=null,u=[-1]){const y=D;C(e);const h=e.$$={fragment:null,ctx:[],props:c,update:o,not_equal:d,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(y?y.$$.context:[])),callbacks:r(),dirty:u,skip_bound:!1,root:t.target||y.$$.root};p&&p(h.root);let v=!1;if(h.ctx=n?n(e,t.props||{},(t,n,...a)=>{const o=a.length?a[0]:n;return h.ctx&&d(h.ctx[t],h.ctx[t]=o)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](o),v&&W(e,t)),n}):[],h.update(),v=!0,l(h.before_update),h.fragment=!!a&&a(h.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);h.fragment&&h.fragment.l(e),e.forEach(m)}else h.fragment&&h.fragment.c();t.intro&&((g=e.$$.fragment)&&g.i&&(N.delete(g),g.i(f))),function(e,t,n){const{fragment:a,after_update:o}=e.$$;a&&a.m(t,n),H(()=>{const t=e.$$.on_mount.map(s).filter(i);e.$$.on_destroy?e.$$.on_destroy.push(...t):l(t),e.$$.on_mount=[]}),o.forEach(H)}(e,t.target,t.anchor),O()}var g,f;C(y)}class B{$$=void 0;$$set=void 0;$destroy(){U(this,1),this.$destroy=o}$on(e,t){if(!i(t))return o;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const V={corn:{name:"Corn",baseTemp:10,upperTemp:30,gddRequired:1200,icon:"üåΩ"},wheat:{name:"Wheat",baseTemp:4,upperTemp:25,gddRequired:1400,icon:"üåæ"},soybean:{name:"Soybean",baseTemp:10,upperTemp:30,gddRequired:1300,icon:"ü´ò"},rice:{name:"Rice",baseTemp:12,upperTemp:35,gddRequired:1800,icon:"üåæ"},cotton:{name:"Cotton",baseTemp:15.5,upperTemp:32,gddRequired:1600,icon:"üåø"},tomato:{name:"Tomato",baseTemp:10,upperTemp:30,gddRequired:1100,icon:"üçÖ"},potato:{name:"Potato",baseTemp:7,upperTemp:30,gddRequired:1e3,icon:"ü•î"},canola:{name:"Canola",baseTemp:5,upperTemp:27,gddRequired:1400,icon:"üåª"}};class K{static calculateSimpleGDD(e,t,n,a){const o=a?Math.min(t,a):t,s=(Math.max(e,n)+o)/2;return Math.max(0,s-n)}static calculateModifiedGDD(e,t,n,a){const o=Math.max(e,n),s=a?Math.min(t,a):t;if(s<n)return 0;const r=(o+s)/2;return Math.max(0,r-n)}static calculateDoubleSineGDD(e,t,n,a){const o=(e+t)/2,s=(t-e)/2,r=Math.max(e,n),l=a?Math.min(t,a):t;if(l<=n)return 0;const i=Math.max(0,s-Math.max(0,n-r))/Math.PI,d=Math.min(l,o+i);return Math.max(0,d-n)}static calculateAccumulatedGDD(e,t){const n=[];let a=0;for(const o of e){let e=0;switch(t.method){case"simple":e=this.calculateSimpleGDD(o.tMin,o.tMax,t.baseTemp,t.upperTemp);break;case"modified":e=this.calculateModifiedGDD(o.tMin,o.tMax,t.baseTemp,t.upperTemp);break;case"double-sine":e=this.calculateDoubleSineGDD(o.tMin,o.tMax,t.baseTemp,t.upperTemp)}a+=e,n.push(a)}return n}static getCropStage(e,t){const n=e/t*100;return n<10?"Planting/Emergence":n<25?"Early Vegetative":n<50?"Late Vegetative":n<75?"Reproductive":n<90?"Grain Filling":n<100?"Maturity":"Harvest Ready"}static estimateDaysToMaturity(e,t,n){return e>=t?0:n<=0?1/0:Math.ceil((t-e)/n)}}class Y{static async getTemperatureData(e,t,n=30){try{const a=window.W?.picker;if(!a)throw new Error("Windy picker not available");const o=a.getPickerData(),s=this.generateMockTemperatureData(e,t,n);return{lat:e,lon:t,gdd:s.totalGDD,dailyGdd:s.dailyGDD,temperature:{min:Math.min(...s.minTemps),max:Math.max(...s.maxTemps),avg:s.avgTemp},current:{temperature:o?.values?.temp??s.avgTemp,dewPoint:o?.values?.dewpoint??null}}}catch(e){throw console.error("Error fetching temperature data:",e),e}}static generateMockTemperatureData(e,t,n){const a=new Date,o=[],s=[],r=[];let l=0;const i=10*Math.sin(((new Date).getMonth()-3)*Math.PI/6),d=.5*(50-Math.abs(e)),c=2*Math.cos(t%180*Math.PI/180);for(let e=n;e>=0;e--){const t=new Date(a);t.setDate(t.getDate()-e);const n=Math.floor((t.getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),p=15+i+d+c+5*Math.sin(n/365*Math.PI*2)+6*(Math.random()-.5),u=8+4*Math.random(),m=p-u/2,y=p+u/2;s.push(m),r.push(y);const h=Math.max(0,(m+y)/2-10);o.push(h),l+=h}return{dailyGDD:o,totalGDD:l,minTemps:s,maxTemps:r,avgTemp:(s.reduce((e,t)=>e+t,0)+r.reduce((e,t)=>e+t,0))/(s.length+r.length)}}static generateHeatMapData(e,t){return Promise.resolve({bounds:e,data:this.generateMockGridData(e,t)})}static generateMockGridData(e,t){const n=[],a=(e.north-e.south)/20,o=(e.east-e.west)/20,s=t?.baseTemp??10,r=t?.targetGdd??1200;for(let t=0;t<20;t++)for(let l=0;l<20;l++){const i=e.south+t*a,d=e.west+l*o,c=Math.sin(((new Date).getMonth()-3)*Math.PI/6),p=.02*(50-Math.abs(i)),u=.3*Math.random(),m=Math.max(0,300+200*c+100*p+100*u-2*s);n.push({lat:i,lon:d,gdd:m,intensity:Math.min(1,m/r)})}return n}static async getTornadoRiskData(e,t,n=48){try{const a=this.computeTornadoParameters(e,t),o=this.calculateRiskIndex(a,n),s=this.calculateProbability(o),r=this.generateTornadoTimeline(e,t,n,a);return{lat:e,lon:t,forecastHours:n,riskIndex:o,probability:s,summary:this.getRiskSummary(o),parameters:a,timeline:r}}catch(e){throw console.error("Error fetching tornado risk data:",e),e}}static async generateTornadoRiskOverlay(e,t=48){return{bounds:e,points:this.generateTornadoRiskGrid(e,t)}}static generateTornadoRiskGrid(e,t){const n=(e.north-e.south)/18,a=(e.east-e.west)/18,o=[];for(let s=0;s<=18;s++)for(let r=0;r<=18;r++){const l=e.south+s*n,i=e.west+r*a,d=this.computeTornadoParameters(l,i),c=2.5*(this.pseudoRandom(l,i,t)-.5),p=this.calculateRiskIndex(d,t,c),u=this.calculateProbability(p);o.push({lat:l,lon:i,riskIndex:p,probability:u})}return o}static computeTornadoParameters(e,t){const n=500+2500*this.pseudoRandom(e,t,1),a=8+45*Math.abs(this.pseudoRandom(e,t,2)),o=60+260*this.pseudoRandom(e,t,3);return{cape:Math.round(n),shear:Math.round(10*a)/10,helicity:Math.round(o)}}static calculateRiskIndex(e,t,n=0){let a=10*(.5*Math.min(1,e.cape/3e3)+.3*Math.min(1,e.shear/40)+.2*Math.min(1,e.helicity/350));return a+=Math.min(2,t/72),a+=n,Math.round(10*Math.max(0,Math.min(10,a)))/10}static calculateProbability(e){const t=Math.min(.98,Math.max(.03,e/10*.92+.04));return Math.round(100*t)/100}static generateTornadoTimeline(e,t,n,a){const o=[];for(let s=0;s<=n;s+=3){const r=1-Math.min(.75,s/(1.6*n)),l=3*(this.pseudoRandom(e+s,t-s,n)-.5),i={cape:a.cape*(.9+.2*this.pseudoRandom(e,t,s)),shear:a.shear*(.85+.25*this.pseudoRandom(e,t,s+1)),helicity:a.helicity*(.88+.3*this.pseudoRandom(e,t,s+2))},d=this.calculateRiskIndex(i,n,l)*r,c=Math.round(10*Math.max(0,Math.min(10,d)))/10,p=this.calculateProbability(c)*r;o.push({hourOffset:s,riskIndex:Math.round(10*c)/10,probability:Math.round(100*Math.max(.02,Math.min(.98,p)))/100})}return o}static getRiskSummary(e){return e<2?"Minimal tornado threat. Routine monitoring recommended.":e<4?"Low-end risk. Keep an eye on forecast updates and radar trends.":e<6?"Moderate risk. Ingredients are present for isolated severe storms.":e<8?"Elevated risk. Organized severe storms capable of producing tornadoes are possible.":"High risk. Conditions favor strong tornado development. Review safety plans immediately."}static pseudoRandom(e,t,n){const a=43758.5453*Math.sin(12.9898*e+78.233*t+43758.5453*n);return a-Math.floor(a)}}function J(e){p(e,"svelte-1p9y649",".plugin-container.svelte-1p9y649.svelte-1p9y649{padding:16px;font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;max-height:90vh;overflow-y:auto}.plugin-header.svelte-1p9y649.svelte-1p9y649{text-align:center;margin-bottom:20px;border-bottom:2px solid #e0e0e0;padding-bottom:10px}.plugin-header.svelte-1p9y649 h2.svelte-1p9y649{margin:0 0 5px 0;color:#2c3e50;font-size:1.4rem}.plugin-header.svelte-1p9y649 p.svelte-1p9y649{margin:0;color:#7f8c8d;font-size:0.9rem}.status.svelte-1p9y649.svelte-1p9y649{margin:0 0 12px 0;padding:8px 12px;border-radius:6px;background:#f1f2f6;color:#2f3542;font-size:0.9rem;transition:background 0.3s ease}.status--ready.svelte-1p9y649.svelte-1p9y649{background:#e8f9ef;color:#216c2a}.status--error.svelte-1p9y649.svelte-1p9y649{background:#fdecea;color:#b00020}.mode-toggle.svelte-1p9y649.svelte-1p9y649{display:grid;grid-template-columns:repeat(2, minmax(0, 1fr));gap:10px;margin:16px 0}.mode-toggle.svelte-1p9y649 button.svelte-1p9y649{border:none;border-radius:8px;padding:10px;font-weight:600;font-size:0.95rem;cursor:pointer;background:#ecf0f1;color:#2c3e50;transition:all 0.25s ease}.mode-toggle.svelte-1p9y649 button.svelte-1p9y649:hover{background:#dfe6e9}.mode-toggle.svelte-1p9y649 button.active.svelte-1p9y649{background:linear-gradient(135deg, #6c5ce7, #0984e3);color:white;box-shadow:0 6px 16px rgba(108, 92, 231, 0.25)}.controls.svelte-1p9y649.svelte-1p9y649{margin-bottom:20px}.control-hint.svelte-1p9y649.svelte-1p9y649{margin:0;font-size:0.8rem;color:#5f6d7a;background:#f2f4f6;padding:8px 10px;border-radius:6px}.control-group.svelte-1p9y649.svelte-1p9y649{margin-bottom:12px}.control-group.svelte-1p9y649 label.svelte-1p9y649,.control-label.svelte-1p9y649.svelte-1p9y649{display:block;font-weight:600;margin-bottom:4px;color:#34495e;font-size:0.85rem}.control-group.svelte-1p9y649 select.svelte-1p9y649,.control-group.svelte-1p9y649 input.svelte-1p9y649{width:100%;padding:6px 8px;border:1px solid #bdc3c7;border-radius:4px;font-size:0.85rem;background:white}.control-group.svelte-1p9y649 select.svelte-1p9y649:focus,.control-group.svelte-1p9y649 input.svelte-1p9y649:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 2px rgba(52, 152, 219, 0.2)}.overlay-toggle.svelte-1p9y649.svelte-1p9y649{width:100%;padding:10px;background:linear-gradient(135deg, #3498db, #2980b9);color:white;border:none;border-radius:6px;font-weight:600;cursor:pointer;margin-top:10px;transition:all 0.3s ease}.overlay-toggle.svelte-1p9y649.svelte-1p9y649:hover{background:linear-gradient(135deg, #2980b9, #1f5f99);transform:translateY(-1px)}.overlay-toggle.svelte-1p9y649.svelte-1p9y649:disabled{background:#b2bec3;cursor:not-allowed;transform:none;box-shadow:none;opacity:0.8}.location-info.svelte-1p9y649.svelte-1p9y649{background:#ecf0f1;padding:8px 12px;border-radius:4px;margin-bottom:15px;font-size:0.85rem}.loading.svelte-1p9y649.svelte-1p9y649{text-align:center;padding:20px;color:#7f8c8d}.results.svelte-1p9y649.svelte-1p9y649{margin-bottom:20px}.result-card.svelte-1p9y649.svelte-1p9y649{background:#f8f9fa;border:1px solid #e9ecef;border-radius:8px;padding:16px;margin-bottom:12px}.result-card.svelte-1p9y649 h3.svelte-1p9y649{margin:0 0 12px 0;color:#2c3e50;font-size:1rem;border-bottom:1px solid #dee2e6;padding-bottom:6px}.main-stats.svelte-1p9y649.svelte-1p9y649{background:linear-gradient(135deg, #74b9ff, #0984e3);color:white;border:none}.main-stats.svelte-1p9y649 h3.svelte-1p9y649{color:white;border-bottom-color:rgba(255, 255, 255, 0.3)}.stat-grid.svelte-1p9y649.svelte-1p9y649{display:grid;grid-template-columns:1fr;gap:8px;margin-bottom:15px}.stat.svelte-1p9y649.svelte-1p9y649{display:flex;justify-content:space-between;align-items:center}.stat.svelte-1p9y649 .label.svelte-1p9y649{font-size:0.85rem;opacity:0.9}.stat.svelte-1p9y649 .value.svelte-1p9y649{font-weight:700;font-size:1.1rem}.risk-value.svelte-1p9y649.svelte-1p9y649{text-shadow:0 1px 2px rgba(0, 0, 0, 0.15)}.risk-summary.svelte-1p9y649.svelte-1p9y649{margin:0;font-size:0.9rem;line-height:1.4;background:rgba(255, 255, 255, 0.2);padding:10px;border-radius:6px}.progress-bar.svelte-1p9y649.svelte-1p9y649{width:100%;height:8px;background:rgba(255, 255, 255, 0.3);border-radius:4px;overflow:hidden}.progress-fill.svelte-1p9y649.svelte-1p9y649{height:100%;background:#00b894;border-radius:4px;transition:width 0.6s ease}.temp-stats.svelte-1p9y649.svelte-1p9y649{display:grid;grid-template-columns:repeat(3, 1fr);gap:12px;text-align:center}.temp-stats.svelte-1p9y649 div.svelte-1p9y649{background:white;padding:8px;border-radius:4px;font-size:0.85rem;font-weight:600}.tornado-ingredients.svelte-1p9y649.svelte-1p9y649{list-style:none;padding:0;margin:0 0 10px 0;display:grid;gap:6px}.tornado-ingredients.svelte-1p9y649 li.svelte-1p9y649{background:white;border-radius:6px;padding:8px 10px;font-size:0.85rem;display:flex;justify-content:space-between}.ingredients-note.svelte-1p9y649.svelte-1p9y649{margin:0;font-size:0.8rem;color:#57606f}.trend-chart.svelte-1p9y649.svelte-1p9y649{display:flex;align-items:flex-end;gap:4px;height:60px;padding:6px 4px 0 4px}.trend-chart.tornado.svelte-1p9y649.svelte-1p9y649{background:#f5f6fa;border-radius:6px;padding-bottom:6px}.trend-bar.svelte-1p9y649.svelte-1p9y649{flex:1;background:linear-gradient(to top, #74b9ff, #0984e3);border-radius:2px 2px 0 0;min-height:2px;transition:all 0.3s ease}.trend-bar.svelte-1p9y649.svelte-1p9y649:hover{background:linear-gradient(to top, #00b894, #00a085)}.chart-label.svelte-1p9y649.svelte-1p9y649{font-size:0.75rem;text-align:center;color:#7f8c8d;margin:5px 0 0 0}.instructions.svelte-1p9y649.svelte-1p9y649{background:#fff3cd;border:1px solid #ffeaa7;border-radius:6px;padding:16px}.instructions.svelte-1p9y649 h3.svelte-1p9y649{margin:0 0 10px 0;color:#856404;font-size:1rem}.instructions.svelte-1p9y649 ul.svelte-1p9y649{margin:0;padding-left:20px}.instructions.svelte-1p9y649 li.svelte-1p9y649{margin-bottom:6px;font-size:0.85rem;color:#856404;line-height:1.4}@media(max-width: 480px){.plugin-container.svelte-1p9y649.svelte-1p9y649{padding:12px}.temp-stats.svelte-1p9y649.svelte-1p9y649{grid-template-columns:1fr;gap:8px}.trend-chart.svelte-1p9y649.svelte-1p9y649{height:40px}}")}function Q(e,t,n){const a=e.slice();return a[44]=t[n],a}function X(e,t,n){const a=e.slice();return a[47]=t[n],a[49]=n,a}function Z(e,t,n){const a=e.slice();return a[50]=t[n][0],a[51]=t[n][1],a}function ee(e){let t,n,a,o,s,r,i,d,p,y,b,w,T,$,D,C,R,I,P=e[14]?"Hide":"Show";return{c(){t=h("div"),n=h("label"),n.textContent="Forecast Window:",a=g(),o=h("select"),s=h("option"),s.textContent="Next 24 hours",r=h("option"),r.textContent="Next 36 hours",i=h("option"),i.textContent="Next 48 hours",d=h("option"),d.textContent="Next 72 hours",p=h("option"),p.textContent="Next 96 hours",y=g(),b=h("div"),b.innerHTML='<span class="control-label svelte-1p9y649">Model Ingredients:</span> <p class="control-hint svelte-1p9y649">Uses CAPE, wind shear, and helicity from forecast data.</p>',w=g(),T=h("button"),$=v(P),D=v(" Tornado Risk Overlay"),x(n,"for","forecast-window"),x(n,"class","svelte-1p9y649"),s.__value=24,M(s,s.__value),r.__value=36,M(r,r.__value),i.__value=48,M(i,i.__value),d.__value=72,M(d,d.__value),p.__value=96,M(p,p.__value),x(o,"id","forecast-window"),x(o,"class","svelte-1p9y649"),void 0===e[15]&&H(()=>e[30].call(o)),x(t,"class","control-group svelte-1p9y649"),x(b,"class","control-group svelte-1p9y649"),x(T,"class","overlay-toggle svelte-1p9y649"),x(T,"type","button"),T.disabled=C=!e[2]},m(l,m){u(l,t,m),c(t,n),c(t,a),c(t,o),c(o,s),c(o,r),c(o,i),c(o,d),c(o,p),_(o,e[15],!0),u(l,y,m),u(l,b,m),u(l,w,m),u(l,T,m),c(T,$),c(T,D),R||(I=[f(o,"change",e[30]),f(o,"change",e[20]),f(T,"click",e[22])],R=!0)},p(e,t){32768&t[0]&&_(o,e[15]),16384&t[0]&&P!==(P=e[14]?"Hide":"Show")&&k($,P),4&t[0]&&C!==(C=!e[2])&&(T.disabled=C)},d(e){e&&(m(t),m(y),m(b),m(w),m(T)),R=!1,l(I)}}}function te(e){let t,n,a,o,s,r,i,d,p,w,T,$,D,C,R,I,P,G,F,S,L,z,E,O,A,N,U,W,j,B,K,Y,J,Q,X,ee,te,ae,oe,se=e[13]?"Hide":"Show",re=q(Object.entries(V)),le=[];for(let t=0;t<re.length;t+=1)le[t]=ne(Z(e,re,t));return{c(){t=h("div"),n=h("label"),n.textContent="Crop Type:",a=g(),o=h("select");for(let e=0;e<le.length;e+=1)le[e].c();s=g(),r=h("div"),i=h("label"),i.textContent="Base Temperature (¬∞C):",d=g(),p=h("input"),w=g(),T=h("div"),$=h("label"),$.textContent="Upper Threshold (¬∞C):",D=g(),C=h("input"),R=g(),I=h("div"),P=h("label"),P.textContent="Calculation Method:",G=g(),F=h("select"),S=h("option"),S.textContent="Simple Average",L=h("option"),L.textContent="Modified (No Negatives)",z=h("option"),z.textContent="Double Sine",E=g(),O=h("div"),A=h("label"),A.textContent="Time Period (days):",N=g(),U=h("select"),W=h("option"),W.textContent="Last 7 days",j=h("option"),j.textContent="Last 14 days",B=h("option"),B.textContent="Last 30 days",K=h("option"),K.textContent="Last 60 days",Y=h("option"),Y.textContent="Growing Season",J=g(),Q=h("button"),X=v(se),ee=v(" Heat Map"),x(n,"for","crop-select"),x(n,"class","svelte-1p9y649"),x(o,"id","crop-select"),x(o,"class","svelte-1p9y649"),void 0===e[0]&&H(()=>e[25].call(o)),x(t,"class","control-group svelte-1p9y649"),x(i,"for","base-temp"),x(i,"class","svelte-1p9y649"),x(p,"id","base-temp"),x(p,"type","number"),x(p,"min","0"),x(p,"max","25"),x(p,"step","0.5"),x(p,"class","svelte-1p9y649"),x(r,"class","control-group svelte-1p9y649"),x($,"for","upper-temp"),x($,"class","svelte-1p9y649"),x(C,"id","upper-temp"),x(C,"type","number"),x(C,"min","20"),x(C,"max","45"),x(C,"step","0.5"),x(C,"class","svelte-1p9y649"),x(T,"class","control-group svelte-1p9y649"),x(P,"for","method"),x(P,"class","svelte-1p9y649"),S.__value="simple",M(S,S.__value),L.__value="modified",M(L,L.__value),z.__value="double-sine",M(z,z.__value),x(F,"id","method"),x(F,"class","svelte-1p9y649"),void 0===e[8]&&H(()=>e[28].call(F)),x(I,"class","control-group svelte-1p9y649"),x(A,"for","period"),x(A,"class","svelte-1p9y649"),W.__value="7",M(W,W.__value),j.__value="14",M(j,j.__value),B.__value="30",M(B,B.__value),K.__value="60",M(K,K.__value),Y.__value="90",M(Y,Y.__value),x(U,"id","period"),x(U,"class","svelte-1p9y649"),void 0===e[9]&&H(()=>e[29].call(U)),x(O,"class","control-group svelte-1p9y649"),x(Q,"class","overlay-toggle svelte-1p9y649"),x(Q,"type","button"),Q.disabled=te=!e[2]},m(l,m){u(l,t,m),c(t,n),c(t,a),c(t,o);for(let e=0;e<le.length;e+=1)le[e]&&le[e].m(o,null);_(o,e[0],!0),u(l,s,m),u(l,r,m),c(r,i),c(r,d),c(r,p),M(p,e[6]),u(l,w,m),u(l,T,m),c(T,$),c(T,D),c(T,C),M(C,e[7]),u(l,R,m),u(l,I,m),c(I,P),c(I,G),c(I,F),c(F,S),c(F,L),c(F,z),_(F,e[8],!0),u(l,E,m),u(l,O,m),c(O,A),c(O,N),c(O,U),c(U,W),c(U,j),c(U,B),c(U,K),c(U,Y),_(U,e[9],!0),u(l,J,m),u(l,Q,m),c(Q,X),c(Q,ee),ae||(oe=[f(o,"change",e[25]),f(o,"change",e[19]),f(p,"input",e[26]),f(C,"input",e[27]),f(F,"change",e[28]),f(U,"change",e[29]),f(Q,"click",e[22])],ae=!0)},p(e,t){if(0&t){let n;for(re=q(Object.entries(V)),n=0;n<re.length;n+=1){const a=Z(e,re,n);le[n]?le[n].p(a,t):(le[n]=ne(a),le[n].c(),le[n].m(o,null))}for(;n<le.length;n+=1)le[n].d(1);le.length=re.length}1&t[0]&&_(o,e[0]),64&t[0]&&b(p.value)!==e[6]&&M(p,e[6]),128&t[0]&&b(C.value)!==e[7]&&M(C,e[7]),256&t[0]&&_(F,e[8]),512&t[0]&&_(U,e[9]),8192&t[0]&&se!==(se=e[13]?"Hide":"Show")&&k(X,se),4&t[0]&&te!==(te=!e[2])&&(Q.disabled=te)},d(e){e&&(m(t),m(s),m(r),m(w),m(T),m(R),m(I),m(E),m(O),m(J),m(Q)),y(le,e),ae=!1,l(oe)}}}function ne(e){let t,n,a,s,r=e[51].icon+"",l=e[51].name+"";return{c(){t=h("option"),n=v(r),a=g(),s=v(l),t.__value=e[50],M(t,t.__value)},m(e,o){u(e,t,o),c(t,n),c(t,a),c(t,s)},p:o,d(e){e&&m(t)}}}function ae(e){let t,n,a,o,s,r,l,i=e[12].lat.toFixed(4)+"",d=e[12].lon.toFixed(4)+"";return{c(){t=h("div"),n=h("p"),a=h("strong"),a.textContent="Selected Location:",o=g(),s=v(i),r=v(", "),l=v(d),x(t,"class","location-info svelte-1p9y649")},m(e,i){u(e,t,i),c(t,n),c(n,a),c(n,o),c(n,s),c(n,r),c(n,l)},p(e,t){4096&t[0]&&i!==(i=e[12].lat.toFixed(4)+"")&&k(s,i),4096&t[0]&&d!==(d=e[12].lon.toFixed(4)+"")&&k(l,d)},d(e){e&&m(t)}}}function oe(e){let t,n,a,o,s="heat-units"===e[5]?"Calculating heat units‚Ä¶":"Analyzing tornado forecast‚Ä¶";return{c(){t=h("div"),n=h("p"),a=v("üîÑ "),o=v(s),x(t,"class","loading svelte-1p9y649")},m(e,s){u(e,t,s),c(t,n),c(n,a),c(n,o)},p(e,t){32&t[0]&&s!==(s="heat-units"===e[5]?"Calculating heat units‚Ä¶":"Analyzing tornado forecast‚Ä¶")&&k(o,s)},d(e){e&&m(t)}}}function se(e){let t,n,a,o,s,r,l,i,d,p,f,b,M,_,T,$,D,C,R,I,P,G,F,S,L,H,z,E,O,A,N,U,W,j,B,K,Y,J,Q,Z,ee,te,ne,ae,oe,se,de,ce,pe,ue,me,ye,he,ve,ge,fe,xe,be,ke,Me,we,_e,Te,$e,De,Ce,Re,Ie=e[1].gdd.toFixed(1)+"",Pe=V[e[0]].name+"",Ge=V[e[0]].gddRequired+"",Fe=e[16].toFixed(1)+"",Se=e[1].temperature.min.toFixed(1)+"",Le=e[1].temperature.max.toFixed(1)+"",He=e[1].temperature.avg.toFixed(1)+"";function ze(e,t){return e[17]>0&&e[17]!==1/0?le:e[16]>=100?re:void 0}let Ee=ze(e),Oe=Ee&&Ee(e),Ae=q(e[1].dailyGdd.slice(-14)),Ne=[];for(let t=0;t<Ae.length;t+=1)Ne[t]=ie(X(e,Ae,t));return{c(){t=h("div"),n=h("div"),a=h("h3"),a.textContent="Heat Unit Summary",o=g(),s=h("div"),r=h("div"),l=h("span"),l.textContent="Accumulated GDD:",i=g(),d=h("span"),p=v(Ie),f=g(),b=h("div"),M=h("span"),_=v("Required for "),T=v(Pe),$=v(":"),D=g(),C=h("span"),R=v(Ge),I=g(),P=h("div"),G=h("span"),G.textContent="Completion:",F=g(),S=h("span"),L=v(Fe),H=v("%"),z=g(),E=h("div"),O=h("div"),A=g(),N=h("div"),U=h("h3"),U.textContent="Crop Development",W=g(),j=h("p"),B=h("strong"),B.textContent="Current Stage:",K=g(),Y=v(e[18]),J=g(),Oe&&Oe.c(),Q=g(),Z=h("div"),ee=h("h3"),te=v("Temperature Summary ("),ne=v(e[9]),ae=v(" days)"),oe=g(),se=h("div"),de=h("div"),ce=v("Min: "),pe=v(Se),ue=v("¬∞C"),me=g(),ye=h("div"),he=v("Max: "),ve=v(Le),ge=v("¬∞C"),fe=g(),xe=h("div"),be=v("Avg: "),ke=v(He),Me=v("¬∞C"),we=g(),_e=h("div"),Te=h("h3"),Te.textContent="Recent GDD Trend",$e=g(),De=h("div");for(let e=0;e<Ne.length;e+=1)Ne[e].c();Ce=g(),Re=h("p"),Re.textContent="Last 14 days daily GDD accumulation",x(a,"class","svelte-1p9y649"),x(l,"class","label svelte-1p9y649"),x(d,"class","value svelte-1p9y649"),x(r,"class","stat svelte-1p9y649"),x(M,"class","label svelte-1p9y649"),x(C,"class","value svelte-1p9y649"),x(b,"class","stat svelte-1p9y649"),x(G,"class","label svelte-1p9y649"),x(S,"class","value svelte-1p9y649"),x(P,"class","stat svelte-1p9y649"),x(s,"class","stat-grid svelte-1p9y649"),x(O,"class","progress-fill svelte-1p9y649"),w(O,"width",e[16]+"%"),x(E,"class","progress-bar svelte-1p9y649"),x(n,"class","result-card main-stats svelte-1p9y649"),x(U,"class","svelte-1p9y649"),x(N,"class","result-card svelte-1p9y649"),x(ee,"class","svelte-1p9y649"),x(de,"class","svelte-1p9y649"),x(ye,"class","svelte-1p9y649"),x(xe,"class","svelte-1p9y649"),x(se,"class","temp-stats svelte-1p9y649"),x(Z,"class","result-card svelte-1p9y649"),x(Te,"class","svelte-1p9y649"),x(De,"class","trend-chart svelte-1p9y649"),x(Re,"class","chart-label svelte-1p9y649"),x(_e,"class","result-card svelte-1p9y649"),x(t,"class","results svelte-1p9y649")},m(e,m){u(e,t,m),c(t,n),c(n,a),c(n,o),c(n,s),c(s,r),c(r,l),c(r,i),c(r,d),c(d,p),c(s,f),c(s,b),c(b,M),c(M,_),c(M,T),c(M,$),c(b,D),c(b,C),c(C,R),c(s,I),c(s,P),c(P,G),c(P,F),c(P,S),c(S,L),c(S,H),c(n,z),c(n,E),c(E,O),c(t,A),c(t,N),c(N,U),c(N,W),c(N,j),c(j,B),c(j,K),c(j,Y),c(N,J),Oe&&Oe.m(N,null),c(t,Q),c(t,Z),c(Z,ee),c(ee,te),c(ee,ne),c(ee,ae),c(Z,oe),c(Z,se),c(se,de),c(de,ce),c(de,pe),c(de,ue),c(se,me),c(se,ye),c(ye,he),c(ye,ve),c(ye,ge),c(se,fe),c(se,xe),c(xe,be),c(xe,ke),c(xe,Me),c(t,we),c(t,_e),c(_e,Te),c(_e,$e),c(_e,De);for(let e=0;e<Ne.length;e+=1)Ne[e]&&Ne[e].m(De,null);c(_e,Ce),c(_e,Re)},p(e,t){if(2&t[0]&&Ie!==(Ie=e[1].gdd.toFixed(1)+"")&&k(p,Ie),1&t[0]&&Pe!==(Pe=V[e[0]].name+"")&&k(T,Pe),1&t[0]&&Ge!==(Ge=V[e[0]].gddRequired+"")&&k(R,Ge),65536&t[0]&&Fe!==(Fe=e[16].toFixed(1)+"")&&k(L,Fe),65536&t[0]&&w(O,"width",e[16]+"%"),262144&t[0]&&k(Y,e[18]),Ee===(Ee=ze(e))&&Oe?Oe.p(e,t):(Oe&&Oe.d(1),Oe=Ee&&Ee(e),Oe&&(Oe.c(),Oe.m(N,null))),512&t[0]&&k(ne,e[9]),2&t[0]&&Se!==(Se=e[1].temperature.min.toFixed(1)+"")&&k(pe,Se),2&t[0]&&Le!==(Le=e[1].temperature.max.toFixed(1)+"")&&k(ve,Le),2&t[0]&&He!==(He=e[1].temperature.avg.toFixed(1)+"")&&k(ke,He),2&t[0]){let n;for(Ae=q(e[1].dailyGdd.slice(-14)),n=0;n<Ae.length;n+=1){const a=X(e,Ae,n);Ne[n]?Ne[n].p(a,t):(Ne[n]=ie(a),Ne[n].c(),Ne[n].m(De,null))}for(;n<Ne.length;n+=1)Ne[n].d(1);Ne.length=Ae.length}},d(e){e&&m(t),Oe&&Oe.d(),y(Ne,e)}}}function re(e){let t;return{c(){t=h("p"),t.innerHTML="<strong>Status:</strong> ‚úÖ Ready for harvest"},m(e,n){u(e,t,n)},p:o,d(e){e&&m(t)}}}function le(e){let t,n,a,o,s;return{c(){t=h("p"),n=h("strong"),n.textContent="Est. Days to Maturity:",a=g(),o=v(e[17]),s=v(" days")},m(e,r){u(e,t,r),c(t,n),c(t,a),c(t,o),c(t,s)},p(e,t){131072&t[0]&&k(o,e[17])},d(e){e&&m(t)}}}function ie(e){let t,n;return{c(){t=h("div"),x(t,"class","trend-bar svelte-1p9y649"),w(t,"height",Math.max(2,e[47]/Math.max(...e[1].dailyGdd)*60)+"px"),x(t,"title",n="Day "+(e[49]+1)+": "+e[47].toFixed(1)+" GDD")},m(e,n){u(e,t,n)},p(e,a){2&a[0]&&w(t,"height",Math.max(2,e[47]/Math.max(...e[1].dailyGdd)*60)+"px"),2&a[0]&&n!==(n="Day "+(e[49]+1)+": "+e[47].toFixed(1)+" GDD")&&x(t,"title",n)},d(e){e&&m(t)}}}function de(e){let t,n,a,o,s,r,l,i,d,p,f,b,M,_,T,$,D,C,R,I,P,G,F,S,L,H,z,E,O,A,N,U,W,j,B,V,K,Y,J,X,Z,ee,te,ne,ae,oe,se,re,le,ie,de,pe,me,ye,he,ve,ge,fe,xe,be,ke,Me,we=e[11].riskIndex.toFixed(1)+"",_e=Math.round(100*e[11].probability)+"",Te=e[11].forecastHours+"",$e=e[11].summary+"",De=e[11].parameters.cape+"",Ce=e[11].parameters.shear+"",Re=e[11].parameters.helicity+"",Ie=e[11].timeline.length+"",Pe=q(e[11].timeline),Ge=[];for(let t=0;t<Pe.length;t+=1)Ge[t]=ce(Q(e,Pe,t));return{c(){t=h("div"),n=h("div"),a=h("h3"),a.textContent="Tornado Risk Outlook",o=g(),s=h("div"),r=h("div"),l=h("span"),l.textContent="Risk Index (0-10):",i=g(),d=h("span"),p=v(we),f=g(),b=h("div"),M=h("span"),M.textContent="Probability:",_=g(),T=h("span"),$=v(_e),D=v("%"),C=g(),R=h("div"),I=h("span"),I.textContent="Forecast Window:",P=g(),G=h("span"),F=v("Next "),S=v(Te),L=v("h"),H=g(),z=h("p"),E=v($e),O=g(),A=h("div"),N=h("h3"),N.textContent="Key Ingredients",U=g(),W=h("ul"),j=h("li"),B=h("strong"),B.textContent="CAPE:",V=g(),K=v(De),Y=v(" J/kg"),J=g(),X=h("li"),Z=h("strong"),Z.textContent="0-6 km Shear:",ee=g(),te=v(Ce),ne=v(" m/s"),ae=g(),oe=h("li"),se=h("strong"),se.textContent="Storm-Relative Helicity:",re=g(),le=v(Re),ie=v(" m¬≤/s¬≤"),de=g(),pe=h("p"),pe.textContent="Higher values of these ingredients support rotating updrafts that can produce tornadoes.",me=g(),ye=h("div"),he=h("h3"),he.textContent="Risk Trend",ve=g(),ge=h("div");for(let e=0;e<Ge.length;e+=1)Ge[e].c();fe=g(),xe=h("p"),be=v("Risk index every 3 hours ("),ke=v(Ie),Me=v(" points)"),x(a,"class","svelte-1p9y649"),x(l,"class","label svelte-1p9y649"),x(d,"class","value risk-value svelte-1p9y649"),w(d,"color",ue(e[11].riskIndex)),x(r,"class","stat svelte-1p9y649"),x(M,"class","label svelte-1p9y649"),x(T,"class","value svelte-1p9y649"),x(b,"class","stat svelte-1p9y649"),x(I,"class","label svelte-1p9y649"),x(G,"class","value svelte-1p9y649"),x(R,"class","stat svelte-1p9y649"),x(s,"class","stat-grid svelte-1p9y649"),x(z,"class","risk-summary svelte-1p9y649"),x(n,"class","result-card main-stats svelte-1p9y649"),x(N,"class","svelte-1p9y649"),x(j,"class","svelte-1p9y649"),x(X,"class","svelte-1p9y649"),x(oe,"class","svelte-1p9y649"),x(W,"class","tornado-ingredients svelte-1p9y649"),x(pe,"class","ingredients-note svelte-1p9y649"),x(A,"class","result-card svelte-1p9y649"),x(he,"class","svelte-1p9y649"),x(ge,"class","trend-chart tornado svelte-1p9y649"),x(xe,"class","chart-label svelte-1p9y649"),x(ye,"class","result-card svelte-1p9y649"),x(t,"class","results svelte-1p9y649")},m(e,m){u(e,t,m),c(t,n),c(n,a),c(n,o),c(n,s),c(s,r),c(r,l),c(r,i),c(r,d),c(d,p),c(s,f),c(s,b),c(b,M),c(b,_),c(b,T),c(T,$),c(T,D),c(s,C),c(s,R),c(R,I),c(R,P),c(R,G),c(G,F),c(G,S),c(G,L),c(n,H),c(n,z),c(z,E),c(t,O),c(t,A),c(A,N),c(A,U),c(A,W),c(W,j),c(j,B),c(j,V),c(j,K),c(j,Y),c(W,J),c(W,X),c(X,Z),c(X,ee),c(X,te),c(X,ne),c(W,ae),c(W,oe),c(oe,se),c(oe,re),c(oe,le),c(oe,ie),c(A,de),c(A,pe),c(t,me),c(t,ye),c(ye,he),c(ye,ve),c(ye,ge);for(let e=0;e<Ge.length;e+=1)Ge[e]&&Ge[e].m(ge,null);c(ye,fe),c(ye,xe),c(xe,be),c(xe,ke),c(xe,Me)},p(e,t){if(2048&t[0]&&we!==(we=e[11].riskIndex.toFixed(1)+"")&&k(p,we),2048&t[0]&&w(d,"color",ue(e[11].riskIndex)),2048&t[0]&&_e!==(_e=Math.round(100*e[11].probability)+"")&&k($,_e),2048&t[0]&&Te!==(Te=e[11].forecastHours+"")&&k(S,Te),2048&t[0]&&$e!==($e=e[11].summary+"")&&k(E,$e),2048&t[0]&&De!==(De=e[11].parameters.cape+"")&&k(K,De),2048&t[0]&&Ce!==(Ce=e[11].parameters.shear+"")&&k(te,Ce),2048&t[0]&&Re!==(Re=e[11].parameters.helicity+"")&&k(le,Re),2048&t[0]){let n;for(Pe=q(e[11].timeline),n=0;n<Pe.length;n+=1){const a=Q(e,Pe,n);Ge[n]?Ge[n].p(a,t):(Ge[n]=ce(a),Ge[n].c(),Ge[n].m(ge,null))}for(;n<Ge.length;n+=1)Ge[n].d(1);Ge.length=Pe.length}2048&t[0]&&Ie!==(Ie=e[11].timeline.length+"")&&k(ke,Ie)},d(e){e&&m(t),y(Ge,e)}}}function ce(e){let t,n;return{c(){t=h("div"),x(t,"class","trend-bar svelte-1p9y649"),x(t,"title",n=`T+${e[44].hourOffset}h ¬∑ Risk ${e[44].riskIndex.toFixed(1)} ¬∑ ${Math.round(100*e[44].probability)}% chance`),w(t,"height",`${Math.max(4,e[44].riskIndex/10*70)}px`),w(t,"background",ue(e[44].riskIndex))},m(e,n){u(e,t,n)},p(e,a){2048&a[0]&&n!==(n=`T+${e[44].hourOffset}h ¬∑ Risk ${e[44].riskIndex.toFixed(1)} ¬∑ ${Math.round(100*e[44].probability)}% chance`)&&x(t,"title",n),2048&a[0]&&w(t,"height",`${Math.max(4,e[44].riskIndex/10*70)}px`),2048&a[0]&&w(t,"background",ue(e[44].riskIndex))},d(e){e&&m(t)}}}function pe(e){let t,n,a,s,r,i,d,p,y,b,M,w,_,T,D,C,R,I,P,G,F=(e[4]?e[4]:e[3])+"";function S(e,t){return"heat-units"===e[5]?te:ee}let L=S(e),H=L(e),z=e[12]&&ae(e),E=e[10]&&oe(e),O="heat-units"===e[5]&&e[1]&&se(e),A="tornado"===e[5]&&e[11]&&de(e);return{c(){t=h("section"),n=h("header"),n.innerHTML='<h2 class="svelte-1p9y649">üå°Ô∏è Agricultural Heat Units</h2> <p class="svelte-1p9y649">Growing Degree Days &amp; Severe Weather Toolkit</p>',a=g(),s=h("p"),r=v(F),i=g(),d=h("div"),p=h("button"),p.textContent="üå± Heat Units",y=g(),b=h("button"),b.textContent="üå™Ô∏è Tornado Outlook",M=g(),w=h("div"),H.c(),_=g(),z&&z.c(),T=g(),E&&E.c(),D=g(),O&&O.c(),C=g(),A&&A.c(),R=g(),I=h("div"),I.innerHTML='<h3 class="svelte-1p9y649">How to Use</h3> <ul class="svelte-1p9y649"><li class="svelte-1p9y649">üéØ Click anywhere on the map to analyze the selected location</li> <li class="svelte-1p9y649">üåæ Use Heat Units mode to pick a crop and adjust temperature thresholds</li> <li class="svelte-1p9y649">üå™Ô∏è Switch to Tornado Outlook mode to evaluate forecast-based risk ingredients</li> <li class="svelte-1p9y649">üó∫Ô∏è Toggle the overlay to visualize either GDD or tornado risk across the map</li> <li class="svelte-1p9y649">üìà Review trend cards to monitor crop progress or tornado risk timing</li></ul>',x(n,"class","plugin-header svelte-1p9y649"),x(s,"class","status svelte-1p9y649"),$(s,"status--ready",e[2]),$(s,"status--error",!!e[4]),x(p,"type","button"),x(p,"class","svelte-1p9y649"),$(p,"active","heat-units"===e[5]),x(b,"type","button"),x(b,"class","svelte-1p9y649"),$(b,"active","tornado"===e[5]),x(d,"class","mode-toggle svelte-1p9y649"),x(w,"class","controls svelte-1p9y649"),x(I,"class","instructions svelte-1p9y649"),x(t,"class","plugin-container svelte-1p9y649")},m(o,l){u(o,t,l),c(t,n),c(t,a),c(t,s),c(s,r),c(t,i),c(t,d),c(d,p),c(d,y),c(d,b),c(t,M),c(t,w),H.m(w,null),c(t,_),z&&z.m(t,null),c(t,T),E&&E.m(t,null),c(t,D),O&&O.m(t,null),c(t,C),A&&A.m(t,null),c(t,R),c(t,I),P||(G=[f(p,"click",e[23]),f(b,"click",e[24])],P=!0)},p(e,n){24&n[0]&&F!==(F=(e[4]?e[4]:e[3])+"")&&k(r,F),4&n[0]&&$(s,"status--ready",e[2]),16&n[0]&&$(s,"status--error",!!e[4]),32&n[0]&&$(p,"active","heat-units"===e[5]),32&n[0]&&$(b,"active","tornado"===e[5]),L===(L=S(e))&&H?H.p(e,n):(H.d(1),H=L(e),H&&(H.c(),H.m(w,null))),e[12]?z?z.p(e,n):(z=ae(e),z.c(),z.m(t,T)):z&&(z.d(1),z=null),e[10]?E?E.p(e,n):(E=oe(e),E.c(),E.m(t,D)):E&&(E.d(1),E=null),"heat-units"===e[5]&&e[1]?O?O.p(e,n):(O=se(e),O.c(),O.m(t,C)):O&&(O.d(1),O=null),"tornado"===e[5]&&e[11]?A?A.p(e,n):(A=de(e),A.c(),A.m(t,R)):A&&(A.d(1),A=null)},i:o,o:o,d(e){e&&m(t),H.d(),z&&z.d(),E&&E.d(),O&&O.d(),A&&A.d(),P=!1,l(G)}}}function ue(e){const t=Math.max(0,Math.min(1,e/10));return`hsl(${120-120*t}, 85%, ${40+10*t}%)`}function me(e,t,n){let a,o,s,r,l,i=!1,d="Initializing‚Ä¶",c="",p=null,u=0,m="heat-units",y="corn",h=V[y].baseTemp,v=V[y].upperTemp,g="modified",f=30,x=!1,k=null,M=null,w=null,_=null,$=null,D=48;var C;function I(e){const{lat:t,lng:a}=e.latlng;n(12,w={lat:t,lon:a}),"heat-units"===m?G(t,a):F(t,a)}function P(e){e.lat&&e.lon&&(n(12,w={lat:e.lat,lon:e.lon}),"heat-units"===m?G(e.lat,e.lon):F(e.lat,e.lon))}async function G(e,t){n(10,x=!0);try{n(1,k=await Y.getTemperatureData(e,t,f)),n(11,M=null)}catch(e){console.error("Failed to calculate heat units:",e)}finally{n(10,x=!1)}}async function F(e,t){n(10,x=!0);try{n(11,M=await Y.getTornadoRiskData(e,t,D))}catch(e){console.error("Failed to calculate tornado risk:",e)}finally{n(10,x=!1)}}function S(e){m!==e&&(n(5,m=e),"heat-units"===m?($&&(r.removeLayer($),n(14,$=null)),w&&G(w.lat,w.lon)):(_&&(r.removeLayer(_),n(13,_=null)),w&&F(w.lat,w.lon)))}C=()=>{const e=()=>{const e=window.W;return!!e&&(function(e){n(2,i=!0),n(3,d="Connected to the Windy map."),n(4,c=""),r=e.map,e.picker,e.store,l=e.broadcast,p&&(clearInterval(p),p=null),r&&r.on("click",I),l&&l.on("pickerOpened",P)}(e),!0)};e()||(n(3,d="Waiting for the Windy map to initialize‚Ä¶"),p=setInterval(()=>{u+=1,e()||u>=40&&(n(4,c="Unable to connect to the Windy API. Try reloading the plugin."),n(3,d="Windy API not available."),p&&(clearInterval(p),p=null))},500))},R().$$.on_mount.push(C),function(e){R().$$.on_destroy.push(e)}(()=>{r&&r.off("click",I),l&&l.off("pickerOpened",P),p&&(clearInterval(p),p=null),_&&r.removeLayer(_),$&&r.removeLayer($)});return e.$$.update=()=>{3&e.$$.dirty[0]&&n(18,a=k?K.getCropStage(k.gdd,V[y].gddRequired):""),3&e.$$.dirty[0]&&n(17,o=k?K.estimateDaysToMaturity(k.gdd,V[y].gddRequired,k.dailyGdd.slice(-7).reduce((e,t)=>e+t,0)/7):0),3&e.$$.dirty[0]&&n(16,s=k?Math.min(100,k.gdd/V[y].gddRequired*100):0)},[y,k,i,d,c,m,h,v,g,f,x,M,w,_,$,D,s,o,a,function(){const e=V[y];n(6,h=e.baseTemp),n(7,v=e.upperTemp),w&&"heat-units"===m&&G(w.lat,w.lon)},function(e){const t=Number(e.target.value);n(15,D=t),w&&"tornado"===m&&F(w.lat,w.lon)},S,function(){r&&("heat-units"===m?_?(r.removeLayer(_),n(13,_=null)):async function(){const e=r.getBounds(),t={crop:y,baseTemp:h,upperTemp:v,timePeriod:f};try{const a=await Y.generateHeatMapData(e,t),o=window.L;if(!o)return void console.warn("Leaflet API not available to render heat map overlay.");const s=o.layerGroup();a.data.forEach(e=>{const t=function(e){const t=Math.max(0,Math.min(1,e));return`hsl(${200-160*t}, 85%, ${40+20*t}%)`}(e.intensity),n=o.circleMarker([e.lat,e.lon],{radius:6,color:t,fillColor:t,fillOpacity:.55,weight:0});n.bindPopup(`GDD: ${e.gdd.toFixed(0)}\nIntensity: ${(100*e.intensity).toFixed(0)}%`),s.addLayer(n)}),s.addTo(r),n(13,_=s)}catch(e){console.error("Failed to create heat map:",e)}}():$?(r.removeLayer($),n(14,$=null)):async function(){const e=r.getBounds();try{const t=await Y.generateTornadoRiskOverlay(e,D),a=window.L;if(!a)return void console.warn("Leaflet API not available to render tornado overlay.");const o=a.layerGroup();t.points.forEach(e=>{const t=ue(e.riskIndex),n=a.circleMarker([e.lat,e.lon],{radius:Math.max(4,e.riskIndex/10*9),color:t,fillColor:t,fillOpacity:.6,weight:1});n.bindPopup(`Risk index: ${e.riskIndex.toFixed(1)} / 10\nProbability: ${(100*e.probability).toFixed(0)}%`),o.addLayer(n)}),o.addTo(r),n(14,$=o)}catch(e){console.error("Failed to create tornado overlay:",e)}}())},()=>S("heat-units"),()=>S("tornado"),function(){y=T(this),n(0,y)},function(){h=b(this.value),n(6,h)},function(){v=b(this.value),n(7,v)},function(){g=T(this),n(8,g)},function(){f=T(this),n(9,f)},function(){D=T(this),n(15,D)}]}var ye=Object.freeze({__proto__:null,default:class extends B{constructor(e){super(),j(this,e,me,pe,d,{},J,[-1,-1])}}});return e.config=t,e.default=n,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
